<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Bootstrap Table</title>
    <meta name="author" content="zhixin">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../src/bootstrap-table.css">
    <!--[if lt IE 9]>
    <script src="//wenzhixin.net.cn/js/html5shiv.js"></script>
    <script src="//wenzhixin.net.cn/js/respond.min.js"></script>
    <![endif]-->
</head>
<body>
	<div style="width:800px">
		<table id="table" style=""></table>
	</div>
</body>

<script src="../assets/jquery.min.js"></script>
<script src="../assets/bootstrap/js/bootstrap.min.js"></script>
<script src="../src/bootstrap-table.js"></script>
<script type="text/javascript">
	$('#table').bootstrapTable({
	    url: 'cashier.json',
	    height:400,
	    columns:[
	    	{
	    		field:"index",
	    		title:"序号",
	    		align:"center",
	    		width:100,
	    	},
	    	{
	    		field:"barcode",
	    		title:"商品条形码",
	    		align:"left",
	    		width:200,
	    	},
	    	{
	    		field:"proname",
	    		title:"商品名称",
	    		align:"left",
	    		width:200,
	    	},
	    	{
	    		field:"price",
	    		title:"单价（元）",
	    		align:"center",
	    		width:200,
	    	},
	    	{
	    		field:"count",
	    		title:"数量",
	    		align:"center",
	    		width:200,
	    		formatter:function(value, row){
	    			var editElem = '<input type="number" class="form-control input-positive" min="1" ' +
	    			'style="width: 100%; height: 100%; margin: 0px;" value="'+value+'" name="count"'+
	    			' onkeyup="forPositiveInt(this);" onblur="forPositiveInt(this);"/>';
	    			return editElem;
	    		}
	    	},
	    	{
	    		field:"subtotal",
	    		title:"小计",
	    		align:"center",
	    		width:200,
	    	},
	    ],
	});
	
	 //input正整数
	 function forPositiveInt(input) {
		if ($(input).val().length == 1) {
			$(input).val($(input).val().replace(/[^1-9]/g, '0'));
		} else {
			$(input).val($(input).val().replace(/\D/g, ''));
		}
		if (!$(input).val()) {//为空时，置1
			$(input).val(1);
		}
	 }
	
</script>
</html>